<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediScan AI - Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e6f7ff 0%, #ffffff 50%, #f0f8ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: #2d3748;
        }

        /* Animated background particles - Hospital themed */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(66, 153, 225, 0.1);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(66, 153, 225, 0.3);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
            25% { transform: translateY(-50px) translateX(30px) rotate(90deg); }
            50% { transform: translateY(-80px) translateX(-30px) rotate(180deg); }
            75% { transform: translateY(-50px) translateX(20px) rotate(270deg); }
        }

        .container {
            width: 95%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
                        0 0 80px rgba(66, 153, 225, 0.1);
            border: 1px solid rgba(66, 153, 225, 0.2);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        /* Header */
        .header {
            padding: 20px 30px;
            background: linear-gradient(135deg, rgba(66, 153, 225, 0.1), rgba(49, 130, 206, 0.05));
            border-bottom: 1px solid rgba(66, 153, 225, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #4299e1, #63b3ed);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: pulse 2s infinite;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .logo-text {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
        }

        .subtitle {
            font-size: 14px;
            color: #718096;
            margin-top: 4px;
        }

        /* Form Container */
        .form-container {
            padding: 40px 30px;
            flex: 1;
        }

        .auth-form {
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-form.hidden {
            display: none;
        }

        .form-title {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-title h2 {
            font-size: 28px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .form-title p {
            color: #718096;
            font-size: 16px;
        }

        /* Input Groups */
        .input-group {
            margin-bottom: 24px;
            position: relative;
        }

        .input-group input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            background: #ffffff;
            transition: all 0.3s ease;
            outline: none;
        }

        .input-group input:focus {
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        .input-group label {
            position: absolute;
            left: 20px;
            top: 16px;
            font-size: 16px;
            color: #a0aec0;
            pointer-events: none;
            transition: all 0.3s ease;
            background: white;
            padding: 0 4px;
        }

        .input-group input:focus ~ label,
        .input-group input:not(:placeholder-shown) ~ label {
            top: -10px;
            font-size: 12px;
            color: #4299e1;
        }

        /* Buttons */
        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4299e1, #63b3ed);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 153, 225, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .google-btn {
            width: 100%;
            padding: 16px;
            background: #ffffff;
            color: #757575;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .google-btn:hover {
            border-color: #dadce0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Switch Text */
        .switch-text {
            text-align: center;
            margin-top: 24px;
            color: #718096;
            font-size: 14px;
        }

        .switch-text a {
            color: #4299e1;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .switch-text a:hover {
            color: #3182ce;
            text-decoration: underline;
        }

        /* Loading Animation */
        .loading {
            display: none;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .loading span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4299e1;
            animation: loading 1.4s ease-in-out infinite both;
        }

        .loading span:nth-child(1) { animation-delay: -0.32s; }
        .loading span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes loading {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Error Message */
        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        /* Success Message */
        .success-message {
            background: #c6f6d5;
            color: #276749;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        /* Hospital Elements */
        .hospital-elements {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            opacity: 0.3;
            z-index: 0;
        }
    </style>
</head>
<body>
    <!-- Background animation -->
    <div class="bg-animation" id="bgAnimation"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üè•</div>
                <div class="logo-text">MediScan AI</div>
            </div>
            <div class="subtitle">Advanced Medical Diagnostics</div>
        </div>

        <div class="hospital-elements">‚öïÔ∏è ü©∫ üè• üíä</div>

        <!-- Form Container -->
        <div class="form-container">
            <!-- Login Form -->
            <form id="loginForm" class="auth-form">
                <div class="form-title">
                    <h2>Welcome Back</h2>
                    <p>Sign in to access your medical dashboard</p>
                </div>

                <div id="loginError" class="error-message"></div>
                <div id="loginSuccess" class="success-message"></div>

                <div class="input-group">
                    <input type="email" id="loginEmail" required>
                    <label>Email Address</label>
                </div>

                <div class="input-group">
                    <input type="password" id="loginPassword" required>
                    <label>Password</label>
                </div>

                <button type="submit" class="submit-btn" id="loginBtn">
                    <span class="btn-text">Sign In</span>
                    <div class="loading" id="loginLoading">
                        <span></span><span></span><span></span>
                    </div>
                </button>

                <button type="button" class="google-btn" id="googleLoginBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continue with Google
                </button>

                <p class="switch-text">Don't have an account? <a href="#" id="showSignup">Create Account</a></p>
            </form>

            <!-- Signup Form -->
            <form id="signupForm" class="auth-form hidden">
                <div class="form-title">
                    <h2>Create Account</h2>
                    <p>Join MediScan AI for advanced diagnostics</p>
                </div>

                <div id="signupError" class="error-message"></div>
                <div id="signupSuccess" class="success-message"></div>

                <div class="input-group">
                    <input type="text" id="signupName" required>
                    <label>Full Name</label>
                </div>

                <div class="input-group">
                    <input type="email" id="signupEmail" required>
                    <label>Email Address</label>
                </div>

                <div class="input-group">
                    <input type="password" id="signupPassword" required>
                    <label>Password</label>
                </div>

                <button type="submit" class="submit-btn" id="signupBtn">
                    <span class="btn-text">Create Account</span>
                    <div class="loading" id="signupLoading">
                        <span></span><span></span><span></span>
                    </div>
                </button>

                <button type="button" class="google-btn" id="googleSignupBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continue with Google
                </button>

                <p class="switch-text">Already have an account? <a href="#" id="showLogin">Sign In</a></p>
            </form>
        </div>
    </div>

    <script type="module">
// Create background particles
const bgAnimation = document.getElementById('bgAnimation');
const emojis = ['üè•', '‚öïÔ∏è', 'ü©∫', 'üíä', 'ü©∏', 'ü´Ä', 'ü©π', 'üî¨'];
for (let i = 0; i < 15; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    particle.style.width = Math.random() * 60 + 20 + 'px';
    particle.style.height = particle.style.width;
    particle.style.left = Math.random() * 100 + '%';
    particle.style.top = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 5 + 's';
    particle.style.animationDuration = Math.random() * 10 + 10 + 's';
    bgAnimation.appendChild(particle);
}

// Import Firebase modules
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    signInWithEmailAndPassword,
    signInWithPopup,
    GoogleAuthProvider,
    onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyBn6eWdMPx97cocWhjIgQjpaVC2SNhCmI0",
    authDomain: "abhinav-3416f.firebaseapp.com",
    projectId: "abhinav-3416f",
    storageBucket: "abhinav-3416f.firebasestorage.app",
    messagingSenderId: "1088697904304",
    appId: "1:1088697904304:web:0fd1b529eb59bd30bd5f75"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const googleProvider = new GoogleAuthProvider();

// Get DOM elements for Login Form
const loginForm = document.getElementById('loginForm');
const loginEmail = document.getElementById('loginEmail');
const loginPassword = document.getElementById('loginPassword');
const loginBtn = document.getElementById('loginBtn');
const loginError = document.getElementById('loginError');
const loginSuccess = document.getElementById('loginSuccess');
const googleLoginBtn = document.getElementById('googleLoginBtn');

// Get DOM elements for Signup Form
const signupForm = document.getElementById('signupForm');
const signupName = document.getElementById('signupName');
const signupEmail = document.getElementById('signupEmail');
const signupPassword = document.getElementById('signupPassword');
const signupBtn = document.getElementById('signupBtn');
const signupError = document.getElementById('signupError');
const signupSuccess = document.getElementById('signupSuccess');
const googleSignupBtn = document.getElementById('googleSignupBtn');

// Toggle forms
const showSignupLink = document.getElementById('showSignup');
const showLoginLink = document.getElementById('showLogin');

// Show/Hide Message
function showMessage(element, message, type) {
    element.textContent = message;
    element.style.display = 'block';
    
    setTimeout(() => {
        element.style.display = 'none';
    }, 5000);
}

// Show/Hide Loading
function setLoading(btn, loadingId, isLoading) {
    const btnText = btn.querySelector('.btn-text');
    const loading = document.getElementById(loadingId);
    
    if (isLoading) {
        btnText.style.display = 'none';
        loading.style.display = 'flex';
        btn.disabled = true;
    } else {
        btnText.style.display = 'inline';
        loading.style.display = 'none';
        btn.disabled = false;
    }
}

// Validate Email
function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

// Handle Auth Errors
function getErrorMessage(error) {
    const errorCode = error.code;
    
    switch(errorCode) {
        case 'auth/invalid-email':
            return 'Invalid email address format.';
        case 'auth/user-disabled':
            return 'This account has been disabled.';
        case 'auth/user-not-found':
            return 'No account found with this email.';
        case 'auth/wrong-password':
            return 'Incorrect password.';
        case 'auth/email-already-in-use':
            return 'Email already in use. Please login instead.';
        case 'auth/weak-password':
            return 'Password should be at least 6 characters.';
        case 'auth/popup-closed-by-user':
            return 'Sign in popup was closed.';
        case 'auth/invalid-credential':
            return 'Invalid email or password.';
        default:
            return 'Authentication error: ' + error.message;
    }
}

// LOGIN FORM HANDLER
loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const email = loginEmail.value.trim();
    const password = loginPassword.value.trim();
    
    loginError.style.display = 'none';
    loginSuccess.style.display = 'none';
    
    // Validation
    if (!email || !password) {
        showMessage(loginError, 'Please fill in all fields', 'error');
        return;
    }
    
    if (!isValidEmail(email)) {
        showMessage(loginError, 'Please enter a valid email address', 'error');
        return;
    }
    
    if (password.length < 6) {
        showMessage(loginError, 'Password must be at least 6 characters', 'error');
        return;
    }
    
    setLoading(loginBtn, 'loginLoading', true);
    
    try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        showMessage(loginSuccess, 'Sign in successful! Redirecting...', 'success');
        
        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1000);
    } catch (error) {
        console.error('Login error:', error);
        showMessage(loginError, getErrorMessage(error), 'error');
        setLoading(loginBtn, 'loginLoading', false);
    }
});

// SIGNUP FORM HANDLER
signupForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const name = signupName.value.trim();
    const email = signupEmail.value.trim();
    const password = signupPassword.value.trim();
    
    signupError.style.display = 'none';
    signupSuccess.style.display = 'none';
    
    // Validation
    if (!name || !email || !password) {
        showMessage(signupError, 'Please fill in all fields', 'error');
        return;
    }
    
    if (!isValidEmail(email)) {
        showMessage(signupError, 'Please enter a valid email address', 'error');
        return;
    }
    
    if (password.length < 6) {
        showMessage(signupError, 'Password must be at least 6 characters', 'error');
        return;
    }
    
    setLoading(signupBtn, 'signupLoading', true);
    
    try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        showMessage(signupSuccess, 'Account created successfully! Redirecting...', 'success');
        
        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1000);
    } catch (error) {
        console.error('Signup error:', error);
        showMessage(signupError, getErrorMessage(error), 'error');
        setLoading(signupBtn, 'signupLoading', false);
    }
});

// GOOGLE LOGIN
googleLoginBtn.addEventListener('click', async () => {
    loginError.style.display = 'none';
    googleLoginBtn.disabled = true;
    googleLoginBtn.textContent = 'Signing in...';
    
    try {
        const result = await signInWithPopup(auth, googleProvider);
        showMessage(loginSuccess, 'Google sign in successful! Redirecting...', 'success');
        
        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1000);
    } catch (error) {
        console.error('Google login error:', error);
        showMessage(loginError, getErrorMessage(error), 'error');
        googleLoginBtn.disabled = false;
        googleLoginBtn.innerHTML = `
            <svg width="18" height="18" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Continue with Google
        `;
    }
});

// GOOGLE SIGNUP
googleSignupBtn.addEventListener('click', async () => {
    signupError.style.display = 'none';
    googleSignupBtn.disabled = true;
    googleSignupBtn.textContent = 'Signing up...';
    
    try {
        const result = await signInWithPopup(auth, googleProvider);
        showMessage(signupSuccess, 'Google sign up successful! Redirecting...', 'success');
        
        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1000);
    } catch (error) {
        console.error('Google signup error:', error);
        showMessage(signupError, getErrorMessage(error), 'error');
        googleSignupBtn.disabled = false;
        googleSignupBtn.innerHTML = `
            <svg width="18" height="18" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Continue with Google
        `;
    }
});

// TOGGLE BETWEEN LOGIN AND SIGNUP
showSignupLink.addEventListener('click', (e) => {
    e.preventDefault();
    loginForm.classList.add('hidden');
    signupForm.classList.remove('hidden');
});

showLoginLink.addEventListener('click', (e) => {
    e.preventDefault();
    signupForm.classList.add('hidden');
    loginForm.classList.remove('hidden');
});

// Monitor Authentication State
onAuthStateChanged(auth, (user) => {
    if (user) {
        console.log('User is signed in:', user);
        // Redirect if already logged in
        if (window.location.pathname.includes('login.html')) {
            window.location.href = 'index.html';
        }
    } else {
        console.log('No user signed in');
    }
});
</script>

</body>
</html>


